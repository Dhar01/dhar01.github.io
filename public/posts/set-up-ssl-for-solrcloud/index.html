<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Set up SSL for SolrCloud | Loknath's Log</title>
<meta name=keywords content="how to"><meta name=description content="As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found here. I am writing this for easier step by step setup.
Happy Searching!
Generate certificate & key
From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to .pfx format, which is type PKCS12."><meta name=author content="Loknath Dhar"><link rel=canonical href=http://localhost:1313/posts/set-up-ssl-for-solrcloud/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/images/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/images/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/images/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/set-up-ssl-for-solrcloud/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="http://localhost:1313/posts/set-up-ssl-for-solrcloud/"><meta property="og:site_name" content="Loknath's Log"><meta property="og:title" content="Set up SSL for SolrCloud"><meta property="og:description" content="As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found here. I am writing this for easier step by step setup.
Happy Searching!
Generate certificate & key From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to .pfx format, which is type PKCS12."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-13T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-13T00:00:00+00:00"><meta property="article:tag" content="How To"><meta property="og:image" content="http://localhost:1313/images/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/cover.png"><meta name=twitter:title content="Set up SSL for SolrCloud"><meta name=twitter:description content="As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found here. I am writing this for easier step by step setup.
Happy Searching!
Generate certificate & key
From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to .pfx format, which is type PKCS12."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Set up SSL for SolrCloud","item":"http://localhost:1313/posts/set-up-ssl-for-solrcloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Set up SSL for SolrCloud","name":"Set up SSL for SolrCloud","description":"As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found here. I am writing this for easier step by step setup.\nHappy Searching!\nGenerate certificate \u0026amp; key From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to .pfx format, which is type PKCS12.\n","keywords":["how to"],"articleBody":"As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found here. I am writing this for easier step by step setup.\nHappy Searching!\nGenerate certificate \u0026 key From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to .pfx format, which is type PKCS12.\nAnd before starting Solr, we need to configure zookeeper.\nConfigure Zookeeper We must configure Solr cluster properties in Zookeeper so that Solr nodes know to communicate via SSL. After creating, setting up and starting Zookeeper, we need to setup urlScheme cluster-wide property to https before any Solr nodes start up.\nFor Unix, go to $solr_home and run,\n1 server/scripts/cloud-scripts/zkcli.sh -zkhost server1:2181,server2:2181,server3:2181 -cmd clusterprop -name urlScheme -val https For existing collections, we can update cluster properties by using the Collections API (CLUSTERPROP):\n1 http://IP:8983/solr/admin/collections?action=CLUSTERPROP\u0026name=urlScheme\u0026val=https This command only needs to be run on one node of the cluster, the change will apply to all nodes.\nFrom SolrCloud documentation, you’ll find a way to setup SSL which is self-signed certificate. For production, we needed to setup SSL certificate from an authorized CA. You will have to buy Mulit-Domain SSL (SAN certificate) to cover SolrCloud setup. I’m going to share my experience on how did I setup SSL on our SolrCloud.\nOur SolrCloud was consisted of 3 servers. Suppose, they are:\n192.0.0.1 192.0.0.2 192.0.0.3 By accessing http://192.0.0.1:8983, we can access to Solr frontend. For three servers, there are three frontend. We have to secure\nConfigure Solr At this point, I think we all have set up zookeeper properly, have certificates and key at hand and didn’t start Solr. Now, let’s set up system properties of Solr in $solr_home/bin/solr.in.sh or, /etc/default/solr.in.sh:\n1 2 3 4 5 6 7 8 SOLR_SSL_ENABLED=true SOLR_SSL_KEY_STORE=/etc/solr-ssl.keystore.p12 # define your store path SOLR_SSL_KEY_STORE_PASSWORD=secret # use your store password SOLR_SSL_TRUST_STORE=/etc/solr-ssl.keystore.p12 # define your store path SOLR_SSL_TRUST_STORE_PASSWORD=secret # use your store password SOLR_SSL_NEED_CLIENT_AUTH=false SOLR_SSL_WANT_CLIENT_AUTH=false SOLR_SSL_CHECK_PEER_NAME=true Now, start Solr and it’s working.\nIf you use curl, see the official documentation section on how to use curl in case of SSL.\n","wordCount":"364","inLanguage":"en","image":"http://localhost:1313/images/cover.png","datePublished":"2023-03-13T00:00:00Z","dateModified":"2023-03-13T00:00:00Z","author":{"@type":"Person","name":"Loknath Dhar"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/set-up-ssl-for-solrcloud/"},"publisher":{"@type":"Organization","name":"Loknath's Log","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="#loki (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=23>#loki</a><div class=logo-switches></div></div><ul id=menu><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=http://localhost:1313/about/ title=about><span>about</span></a></li><li><a href=http://localhost:1313/portfolio/ title=portfolio><span>portfolio</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Set up SSL for SolrCloud</h1><div class=post-meta><span title='2023-03-13 00:00:00 +0000 UTC'>March 13, 2023</span>&nbsp;·&nbsp;Loknath Dhar</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><p>As I am highly dependent on official documentation, I found that Apache Solr maintain an awesome documentation from which I learned a lot. Setting up SSL can be found <a href=https://solr.apache.org/guide/solr/latest/deployment-guide/enabling-ssl.html>here</a>. I am writing this for easier step by step setup.</p><p>Happy Searching!</p><h1 id=generate-certificate--key>Generate certificate & key<a hidden class=anchor aria-hidden=true href=#generate-certificate--key>#</a></h1><p>From the official documentation, you can generate a self-signed certificate to test your setup. But for the trusted authority, generate a certificate and convert it to <code>.pfx</code> format, which is type <code>PKCS12</code>.</p><p>And before starting Solr, we need to configure zookeeper.</p><h1 id=configure-zookeeper>Configure Zookeeper<a hidden class=anchor aria-hidden=true href=#configure-zookeeper>#</a></h1><p>We must configure Solr cluster properties in Zookeeper so that Solr nodes know to communicate via SSL. After creating, setting up and starting Zookeeper, we need to setup <code>urlScheme</code> cluster-wide property to <code>https</code> before any Solr nodes start up.</p><p>For <em>Unix</em>, go to <code>$solr_home</code> and run,</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server/scripts/cloud-scripts/zkcli.sh -zkhost server1:2181,server2:2181,server3:2181 -cmd clusterprop -name urlScheme -val https
</span></span></code></pre></td></tr></table></div></div><p>For existing collections, we can update cluster properties by using the Collections API (<em>CLUSTERPROP</em>):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://IP:8983/solr/admin/collections?action<span class=o>=</span>CLUSTERPROP<span class=p>&amp;</span><span class=nv>name</span><span class=o>=</span>urlScheme<span class=p>&amp;</span><span class=nv>val</span><span class=o>=</span>https
</span></span></code></pre></td></tr></table></div></div><p>This command only needs to be run on one node of the cluster, the change will apply to all nodes.</p><p>From SolrCloud documentation, you&rsquo;ll find a way to setup SSL which is self-signed certificate. For production, we needed to setup SSL certificate from an authorized CA. You will have to buy Mulit-Domain SSL (<em>SAN certificate</em>) to cover SolrCloud setup. I&rsquo;m going to share my experience on how did I setup SSL on our SolrCloud.</p><p>Our SolrCloud was consisted of 3 servers. Suppose, they are:</p><ol><li>192.0.0.1</li><li>192.0.0.2</li><li>192.0.0.3</li></ol><p>By accessing <code>http://192.0.0.1:8983</code>, we can access to Solr frontend. For three servers, there are three frontend. We have to secure</p><h1 id=configure-solr>Configure Solr<a hidden class=anchor aria-hidden=true href=#configure-solr>#</a></h1><p>At this point, I think we all have set up zookeeper properly, have certificates and key at hand and didn&rsquo;t start Solr. Now, let&rsquo;s set up system properties of Solr in <code>$solr_home/bin/solr.in.sh</code> or, <code>/etc/default/solr.in.sh</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>SOLR_SSL_ENABLED</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_KEY_STORE</span><span class=o>=</span>/etc/solr-ssl.keystore.p12    <span class=c1># define your store path</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_KEY_STORE_PASSWORD</span><span class=o>=</span>secret    <span class=c1># use your store password</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_TRUST_STORE</span><span class=o>=</span>/etc/solr-ssl.keystore.p12    <span class=c1># define your store path</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_TRUST_STORE_PASSWORD</span><span class=o>=</span>secret    <span class=c1># use your store password</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_NEED_CLIENT_AUTH</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_WANT_CLIENT_AUTH</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>SOLR_SSL_CHECK_PEER_NAME</span><span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></td></tr></table></div></div><p>Now, start Solr and it&rsquo;s working.</p><p>If you use curl, see the official documentation section on how to use curl in case of SSL.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/how-to/>How To</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/all_about_systemctl/><span class=title>« Prev</span><br><span>TIL: systemctl!</span>
</a><a class=next href=http://localhost:1313/posts/all_about_man-pages/><span class=title>Next »</span><br><span>TIL: man pages!</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Loknath Dhar</a></span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>